(function(e){function t(t){for(var o,c,s=t[0],i=t[1],l=t[2],u=0,d=[];u<s.length;u++)c=s[u],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);b&&b(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},c={app:0},a={app:0},r=[];function s(e){return i.p+"js/"+({profil:"profil"}[e]||e)+"."+{profil:"e0c57962"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={profil:1};c[e]?t.push(c[e]):0!==c[e]&&n[e]&&t.push(c[e]=new Promise((function(t,n){for(var o="css/"+({profil:"profil"}[e]||e)+"."+{profil:"ece99f77"}[e]+".css",a=i.p+o,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var l=r[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===a))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===o||u===a)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var o=t&&t.target&&t.target.src||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete c[e],b.parentNode.removeChild(b),n(r)},b.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(b)})).then((function(){c[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=s(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(b);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+c+")",d.name="ChunkLoadError",d.type=o,d.request=c,n[1](d)}a[e]=void 0}};var b=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var b=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"03de":function(e,t,n){e.exports=n.p+"img/icon.a1ceb75f.svg"},"1b51":function(e,t,n){"use strict";n("4f9c")},2769:function(e,t,n){},"2b54":function(e,t,n){},"32ac":function(e,t,n){"use strict";n("2769")},"4f9c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function c(e,t,n,c,a,r){var s=Object(o["z"])("Header"),i=Object(o["z"])("router-view");return Object(o["s"])(),Object(o["e"])(o["a"],null,[Object(o["f"])("div",null,[Object(o["i"])(s)]),Object(o["i"])(i)],64)}var a=n("03de"),r=n.n(a),s=function(e){return Object(o["v"])("data-v-6b6ad886"),e=e(),Object(o["t"])(),e},i={class:"header"},l={id:"nav",class:"navbar navbar-expand-lg header-nav navbar-dark bg-dark"},u={class:"container"},d=s((function(){return Object(o["f"])("a",{class:"navbar-brand",href:"/"},[Object(o["f"])("img",{src:r.a,alt:"",width:"60"})],-1)})),b=s((function(){return Object(o["f"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(o["f"])("span",{class:"navbar-toggler-icon"})],-1)})),f={class:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent"},p={class:"navbar-nav ml-auto mb-2 mb-lg-0"},m={key:0,class:"nav-item"},O=Object(o["h"])("Mon profil"),j={class:"nav-item"};function h(e,t,n,c,a,r){var s=Object(o["z"])("router-link");return Object(o["s"])(),Object(o["e"])("header",i,[Object(o["f"])("nav",l,[Object(o["f"])("div",u,[d,b,Object(o["f"])("div",f,[Object(o["f"])("ul",p,[e.connected?(Object(o["s"])(),Object(o["e"])("li",m,[Object(o["i"])(s,{class:"nav-link btn btn-info me-3","aria-current":"page",to:"/profile"},{default:Object(o["G"])((function(){return[O]})),_:1})])):Object(o["d"])("",!0),Object(o["H"])(Object(o["f"])("li",j,[Object(o["f"])("a",{class:"nav-link btn btn-danger",onClick:t[0]||(t[0]=function(e){return r.disconnect()})},"Se déconnecter")],512),[[o["E"],e.connected]])])])])])])}var v=n("5530"),g=n("5502"),y={name:"Header",data:function(){return{}},computed:Object(v["a"])({},Object(g["b"])(["connected"])),methods:{disconnect:function(){this.$store.dispatch("disconnect")}}},k=(n("6bfe"),n("6b0d")),x=n.n(k);const w=x()(y,[["render",h],["__scopeId","data-v-6b6ad886"]]);var C=w,I={name:"app",components:{Header:C}};const D=x()(I,[["render",c]]);var _=D,P=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),E={class:"containerfluid container-md mt-5"},N={id:"login"},M=Object(o["f"])("h1",{class:"text-center"},"Bienvenue sur Groupomania",-1),A={id:"posts"};function H(e,t,n,c,a,r){var s=Object(o["z"])("Login"),i=Object(o["z"])("Posts");return Object(o["s"])(),Object(o["e"])("div",E,[Object(o["H"])(Object(o["f"])("div",N,[M,Object(o["i"])(s)],512),[[o["E"],!e.connected]]),Object(o["f"])("div",A,[Object(o["i"])(i)])])}var T=function(e){return Object(o["v"])("data-v-7c61eef8"),e=e(),Object(o["t"])(),e},S={class:"container-fluid container-md py-5"},L={class:"form-signup"},B={key:0,class:"text-danger text-center text-uppercase"},z={key:1,class:"text-danger text-center text-uppercase"},F={class:"text-center py-2"},U={key:0,class:"link"},V={key:1,class:"link"},$={key:2,class:"row"},G={class:"col-12 col-md-6"},K={class:"mb-3 form-row"},J=T((function(){return Object(o["f"])("label",{for:"prenom",class:"form-label"},"Prénom",-1)})),q={class:"col-12 col-md-6"},Q={class:"mb-3 form-row"},R=T((function(){return Object(o["f"])("label",{for:"nom",class:"form-label"},"Nom",-1)})),W={class:"mb-3 form-row"},X=T((function(){return Object(o["f"])("label",{for:"email",class:"form-label"},"Adresse e-mail",-1)})),Y={class:"mb-3 form-row"},Z=T((function(){return Object(o["f"])("label",{for:"pass",class:"form-label"},"Mot de passe",-1)})),ee={class:"mb-3 text-end form-row"};function te(e,t,n,c,a,r){return Object(o["s"])(),Object(o["e"])("div",S,[Object(o["f"])("div",L,["login"==e.mode?(Object(o["s"])(),Object(o["e"])("h2",B,"Connexion")):(Object(o["s"])(),Object(o["e"])("h2",z,"Inscription")),Object(o["f"])("div",F,["login"==e.mode?(Object(o["s"])(),Object(o["e"])("p",U,[Object(o["f"])("span",{onClick:t[0]||(t[0]=function(e){return r.switchCreate()})},"Vous n'avez pas de compte ?")])):(Object(o["s"])(),Object(o["e"])("p",V,[Object(o["f"])("span",{onClick:t[1]||(t[1]=function(e){return r.switchLogin()})},"Vous avez déjà un compte ?")]))]),"create"==e.mode?(Object(o["s"])(),Object(o["e"])("div",$,[Object(o["f"])("div",G,[Object(o["f"])("div",K,[J,Object(o["H"])(Object(o["f"])("input",{id:"prenom",type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.prenom=t}),placeholder:"John"},null,512),[[o["D"],e.prenom]])])]),Object(o["f"])("div",q,[Object(o["f"])("div",Q,[R,Object(o["H"])(Object(o["f"])("input",{id:"nom",type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.nom=t}),placeholder:"Doe"},null,512),[[o["D"],e.nom]])])])])):Object(o["d"])("",!0),Object(o["f"])("div",W,[X,Object(o["H"])(Object(o["f"])("input",{id:"email",type:"email",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.email=t}),placeholder:"johne.doe@email.com"},null,512),[[o["D"],e.email]])]),Object(o["f"])("div",Y,[Z,Object(o["H"])(Object(o["f"])("input",{id:"pass",type:"password",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.pass=t}),placeholder:"***********"},null,512),[[o["D"],e.pass]])]),Object(o["f"])("div",ee,["login"==e.mode?(Object(o["s"])(),Object(o["e"])("button",{key:0,onClick:t[6]||(t[6]=function(e){return r.login()}),class:Object(o["o"])(["btn btn-primary",{disabled:!r.validateFields}])},"Se connecter",2)):(Object(o["s"])(),Object(o["e"])("button",{key:1,onClick:t[7]||(t[7]=function(e){return r.create()}),class:Object(o["o"])(["btn btn-primary",{disabled:!r.validateFields}])},"S'inscrire",2))])])])}var ne=n("bc3a").default,oe={name:"Login",data:function(){return{mode:"login",prenom:"",nom:"",email:"",pass:""}},computed:Object(v["a"])({validateFields:function(){return"create"==this.mode?""!=this.prenom&&""!=this.nom&&""!=this.email&&""!=this.pass:""!=this.email&&""!=this.pass}},Object(g["b"])(["connected"])),methods:{switchCreate:function(){this.mode="create"},switchLogin:function(){this.mode="login"},login:function(e){var t=this,n={};n=e?{email:e.email,pass:e.pass}:{email:this.email,pass:this.pass},ne.post("http://127.0.0.1:3200/api/auth/login",n).then((function(e){200!=e.status&&alert("Une erreur est survenue lors de la connexion à votre compte."),e.data.userId&&(t.$store.dispatch("loginAccount",{connected:!0,userId:e.data.userId,prenom:e.data.prenom,nom:e.data.nom,email:e.data.email,admin:e.data.admin,token:e.data.token}),t.$router.push("/"))})).catch((function(e){console.log(e)}))},create:function(){var e=this;console.log(this.email,this.pass,this.nom,this.prenom),ne.post("http://127.0.0.1:3200/api/auth/signup",{prenom:this.prenom,nom:this.nom,email:this.email,pass:this.pass}).then((function(t){console.log(t),201!=t.status&&alert("Une erreur est survenue lors de la création du compte."),e.login({email:e.email,pass:e.pass})})).catch((function(e){return console.log(e)}))}}};n("32ac");const ce=x()(oe,[["render",te],["__scopeId","data-v-7c61eef8"]]);var ae=ce,re=function(e){return Object(o["v"])("data-v-0c1dc9c0"),e=e(),Object(o["t"])(),e},se={key:0,id:"posts-section"},ie={class:"post-input"},le={class:"my-3"},ue={class:"mb-3"},de=re((function(){return Object(o["f"])("label",{for:"content-text",class:"form-label"},null,-1)})),be={class:"mb-3 d-flex justify-content-between"},fe=re((function(){return Object(o["f"])("div",{class:"upload"},null,-1)})),pe={class:"list-posts mt-5"};function me(e,t,n,c,a,r){var s=Object(o["z"])("ListPost");return e.connected?(Object(o["s"])(),Object(o["e"])("div",se,[Object(o["f"])("div",ie,[Object(o["f"])("div",le,[Object(o["f"])("h3",null,"Exprimez-vous "+Object(o["B"])(e.prenom)+" !",1)]),Object(o["f"])("div",ue,[de,Object(o["H"])(Object(o["f"])("textarea",{class:"form-control",name:"content","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.content=t}),id:"content-text",rows:"4",placeholder:"Quoi de neuf ?"},null,512),[[o["D"],e.content]])]),Object(o["f"])("div",be,[fe,Object(o["f"])("button",{onClick:t[1]||(t[1]=function(e){return r.post()}),type:"submit",class:Object(o["o"])(["btn btn-groupomania",{disabled:!r.validateFields}])},"Publier",2)])]),Object(o["f"])("div",pe,[Object(o["i"])(s)])])):Object(o["d"])("",!0)}var Oe=function(e){return Object(o["v"])("data-v-6ebe0718"),e=e(),Object(o["t"])(),e},je={class:"card-header d-flex align-items-center justify-content-between"},he={class:"d-flex align-items-center"},ve=Oe((function(){return Object(o["f"])("img",{class:"rounded-circle",src:"https://i.imgur.com/aoKusnD.jpg",width:"45"},null,-1)})),ge={class:"ms-2"},ye={class:"author"},ke={class:"created"},xe={key:0,class:"d-flex align-items-center"},we=["onClick"],Ce=Oe((function(){return Object(o["f"])("i",{class:"fas fa-trash"},null,-1)})),Ie=[Ce],De=["onClick"],_e=Oe((function(){return Object(o["f"])("i",{class:"fas fa-edit"},null,-1)})),Pe=[_e],Ee={class:"card-body"},Ne={class:"card-text"},Me={key:0,id:"mode-edit"},Ae={class:"text-end"},He=["onClick"],Te=Object(o["g"])('<div class="card-footer text-end" data-v-6ebe0718><button class="btn" data-v-6ebe0718><i class="fas fa-heart" data-v-6ebe0718></i></button><button class="btn" data-v-6ebe0718><i class="fas fa-comments" data-v-6ebe0718></i></button><button class="btn disabled" data-v-6ebe0718><i class="fas fa-share" data-v-6ebe0718></i></button></div>',1);function Se(e,t,n,c,a,r){var s=this;return Object(o["s"])(),Object(o["e"])("div",null,[(Object(o["s"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(e.listPosts,(function(n){return Object(o["s"])(),Object(o["e"])("div",{class:"card mb-4",key:n},[Object(o["f"])("div",je,[Object(o["f"])("div",he,[ve,Object(o["f"])("div",ge,[Object(o["f"])("p",ye,Object(o["B"])(n.prenom)+" "+Object(o["B"])(n.nom),1),Object(o["f"])("p",ke,Object(o["B"])(r.formatDate(n.created)),1)])]),n.created_by==s.userId||1==s.admin?(Object(o["s"])(),Object(o["e"])("div",xe,[Object(o["f"])("button",{onClick:function(e){return r.deletePost(n.id)},class:"btn"},Ie,8,we),Object(o["f"])("button",{onClick:function(e){return r.updateEditMode(n.id)},class:"btn"},Pe,8,De)])):Object(o["d"])("",!0)]),Object(o["f"])("div",Ee,[Object(o["f"])("p",Ne,Object(o["B"])(n.content),1),s.editMode.postId==n.id&&1==s.editMode.edit?(Object(o["s"])(),Object(o["e"])("div",Me,[Object(o["h"])(Object(o["B"])(s.editMode)+" ",1),Object(o["H"])(Object(o["f"])("textarea",{class:"mb-3 form-control",name:"content","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.content=t}),id:"content-text",rows:"4",placeholder:"Quoi de neuf ?"},null,512),[[o["D"],e.content]]),Object(o["f"])("div",Ae,[Object(o["f"])("button",{onClick:function(e){return r.updatePost(n.id)},class:"btn btn-success"},"Mettre à jour",8,He)])])):Object(o["d"])("",!0)]),Te])})),128))])}var Le=n("bc3a").default,Be={name:"ListPost",data:function(){return{listPosts:[],editMode:{},content:""}},computed:Object(v["a"])({},Object(g["b"])(["token","userId","admin"])),methods:{formatDate:function(e){var t=new Date(e),n=new Date,o=n.getTime()-t.getTime(),c=Math.round(o/864e5),a=Math.round(o/6e4),r=Math.round(o/1e3);return r<120&&0==c?"Il y a un instant":a<59&&0==c?"Il y a "+a+" minutes":a>=60&&0==c?"Il y a 1 heure":a>120&&0==c?"Il y a "+Math.round(a/60)+" heures":a>=1440&&1==c?"Il y a un jour":a>1440&&c>1&&c<30?"Il y a "+c+" jours":a>1440&&c>30&&c<365?"Il y a "+Math.round(c/30)+" mois":c>=365&&c<730?"Il y a plus d'un an":c>=730?"Il y a "+Math.round(c/365)+" ans":void 0},deletePost:function(e){var t=this;Le.delete("http://localhost:3200/api/posts/".concat(e)).then((function(e){console.log(e),t.$router.go()})).catch((function(e){console.log(e)}))},updateEditMode:function(e){this.editMode={edit:!0,postId:e},this.content=""},updatePost:function(e){var t=this;console.log(this.content,e),Le.put("http://localhost:3200/api/posts/".concat(e),{content:this.content}).then((function(e){console.log(e),t.$router.go()})).catch((function(e){console.log(e)}))}},mounted:function(){var e=this;Le.get("http://localhost:3200/api/posts").then((function(t){console.log(t.data),e.listPosts=t.data})).catch((function(e){console.log(e)}))}};n("1b51");const ze=x()(Be,[["render",Se],["__scopeId","data-v-6ebe0718"]]);var Fe=ze,Ue=n("bc3a").default,Ve={name:"Posts",data:function(){return{content:""}},components:{ListPost:Fe},computed:Object(v["a"])({validateFields:function(){return console.log(this.content),""!=this.content}},Object(g["b"])(["connected","token","prenom","userId"])),methods:{post:function(){var e=this;console.log(this.userId,this.content),Ue.post("http://localhost:3200/api/posts",{content:this.content,userId:this.userId},{headers:{Authorization:"Bearer "+this.token}}).then((function(t){console.log(t),console.log(e.userId),e.$router.go()})).catch((function(e){console.log(e)}))}}};n("9f98");const $e=x()(Ve,[["render",me],["__scopeId","data-v-0c1dc9c0"]]);var Ge=$e,Ke={name:"Home",components:{Login:ae,Posts:Ge},computed:Object(v["a"])({},Object(g["b"])(["connected","token"]))};const Je=x()(Ke,[["render",H]]);var qe=Je,Qe=[{path:"/",name:"Home",component:qe},{path:"/profil",name:"Profil",component:function(){return n.e("profil").then(n.bind(null,"2768"))}}],Re=Object(P["a"])({history:Object(P["b"])(),routes:Qe}),We=Re,Xe=n("0e44"),Ye=Object(g["a"])({state:{connected:!1,token:"",email:"",userId:"",prenom:"",nom:"",admin:""},plugins:[Object(Xe["a"])()],mutations:{CHANGE_CONNECTED:function(e,t){e.connected=t},ADD_TOKEN:function(e,t){e.token=t},ADD_INFO:function(e,t){e.userId=t.userId,e.email=t.email,e.prenom=t.prenom,e.nom=t.nom,e.admin=t.admin}},actions:{loginAccount:function(e,t){var n=e.commit;console.log(t),n("CHANGE_CONNECTED",t.connected),n("ADD_TOKEN",t.token),n("ADD_INFO",t)},disconnect:function(e){var t=e.commit;t("CHANGE_CONNECTED",!1),t("ADD_TOKEN","")},updateProfile:function(e,t){var n=e.commit;n("ADD_INFO",t)}},modules:{}});Object(o["c"])(_).use(Ye).use(We).mount("#app")},"6bfe":function(e,t,n){"use strict";n("2b54")},"9f98":function(e,t,n){"use strict";n("b398")},b398:function(e,t,n){}});
//# sourceMappingURL=app.9ec3d426.js.map