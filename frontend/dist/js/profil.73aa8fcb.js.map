{"version":3,"sources":["webpack:///./src/views/Profil.vue","webpack:///./src/views/Profil.vue?77f2","webpack:///./src/views/Profil.vue?1060"],"names":["class","src","for","isConnected","updateAvatar","$event","type","name","id","avatar","prenom","nom","email","deleteAccount","newPrenom","target","value","placeholder","newNom","newEmail","newPass","updateUser","data","newAvatar","computed","methods","FormData","append","this","userId","image","a","put","headers","Authorization","token","then","response","console","log","$store","dispatch","$router","go","catch","error","connected","push","delete","event","files","URL","createObjectURL","__exports__","render"],"mappings":"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","file":"js/profil.73aa8fcb.js","sourcesContent":["<template>\r\n  <div v-if=\"isConnected()\" class=\"container-fluid container-md mt-5\">\r\n    <div class=\"container\">\r\n      <div class=\"row gutters\">\r\n        <div class=\"col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12\">\r\n          <div class=\"card h-100\">\r\n            <div class=\"card-body\">\r\n              <div class=\"account-settings\">\r\n                <div class=\"user-profile\">\r\n                  <div class=\"user-avatar\">\r\n                    <label>\r\n                      <div class=\"modify-profile\">\r\n                        <p>Modifier</p>\r\n                      </div>\r\n                      <input @change=\"updateAvatar($event)\" type=\"file\" name=\"avatar\" id=\"inputAvatar\">\r\n                      <img v-if=\"avatar\" :src=\"avatar\">\r\n                      <img v-else src=\"https://semainedelhistoire.com/wp-content/uploads/2021/04/avatar_placeholder.png\">\r\n                    </label>\r\n                  </div>\r\n                  <h5 class=\"user-name\">{{ prenom }} {{ nom }}</h5>\r\n                  <h6 class=\"user-email\">{{ email }}</h6>\r\n                  <button @click=\"deleteAccount()\" class=\"btn btn-danger mt-4\">Supprimer mon compte</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-xl-9 col-lg-9 col-md-12 col-sm-12 col-12\">\r\n          <div class=\"card h-100\">\r\n            <div class=\"card-body\">\r\n              <div class=\"row gutters\">\r\n                <div class=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\r\n                  <h6 class=\"mb-2 text-danger\">Détails du compte</h6>\r\n                </div>\r\n                <div class=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 mt-2\">\r\n                  <div class=\"form-group\">\r\n                    <label for=\"prenom\">Prénom</label>\r\n                    <input type=\"text\" class=\"form-control\" @input=\"newPrenom = $event.target.value\" id=\"prenom\" placeholder=\"John\" :value=\"prenom\">\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 mt-2\">\r\n                  <div class=\"form-group\">\r\n                    <label for=\"nom\">Nom</label>\r\n                    <input type=\"text\" class=\"form-control\" @input=\"newNom = $event.target.value\" id=\"nom\" placeholder=\"Doe\" :value=\"nom\">\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 my-4\">\r\n                  <div class=\"form-group\">\r\n                    <label for=\"email\">E-mail</label>\r\n                    <input type=\"email\" class=\"form-control\" @input=\"newEmail = $event.target.value\" id=\"email\" placeholder=\"john.doe@example.com\" :value=\"email\">\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 mb-3 my-4\">\r\n                  <div class=\"form-group\">\r\n                    <label for=\"pass\">Nouveau mot de passe</label>\r\n                    <input type=\"password\" v-model=\"newPass\" class=\"form-control\" id=\"pass\" placeholder=\"*************\">\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"row gutters\">\r\n                <div class=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\r\n                  <div class=\"text-right d-flex justify-content-end\">\r\n                    <button @click=\"updateUser()\" id=\"submit\" name=\"submit\" class=\"btn btn-primary\">Mettre à jour</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import axios from 'axios'\r\n  import { mapState } from 'vuex'\r\n\r\n  export default {\r\n      name: 'Profil',\r\n      data() {\r\n        return {\r\n          newPrenom: '',\r\n          newNom: '',\r\n          newEmail: '',\r\n          newPass: '',\r\n          newAvatar: ''\r\n        }\r\n      },\r\n      computed: {\r\n        ...mapState(['connected', 'prenom', 'nom', 'email', 'avatar', 'userId', 'token'])\r\n      },\r\n      methods: {\r\n        updateUser() {\r\n\r\n          let data = new FormData()\r\n          data.append('userId', this.userId)\r\n\r\n          if (this.newPrenom != \"\") {\r\n            data.append('prenom', this.newPrenom)\r\n          }else {\r\n            data.append('prenom', this.prenom)\r\n          }\r\n\r\n          if (this.newNom != \"\") {\r\n            data.append('nom', this.newNom)\r\n          }else {\r\n            data.append('nom', this.nom)\r\n          }\r\n\r\n          if (this.newEmail != \"\") {\r\n            data.append('email', this.newEmail)\r\n          }else {\r\n            data.append('email', this.email)\r\n          }\r\n\r\n          if (this.newPass != \"\") {\r\n            data.append('pass', this.newPass)\r\n          }\r\n\r\n          if (this.image != \"\") {\r\n            data.append('image', this.image)\r\n          }\r\n\r\n          axios.put('http://localhost:3200/api/auth/update', data, {\r\n            headers: {\r\n              Authorization: `Bearer ${this.token}`,\r\n              'Content-Type': 'image/jpeg'\r\n            }\r\n          })\r\n          .then(response => {\r\n            console.log(response)\r\n            this.$store.dispatch('updateAccount', {\r\n                userId: response.data.userId,\r\n                prenom: response.data.prenom,\r\n                nom: response.data.nom,\r\n                email: response.data.email,\r\n                avatar: response.data.avatar\r\n            })\r\n            this.$router.go()\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n          })  \r\n        },\r\n        isConnected() {\r\n          if (!this.connected) {\r\n            this.$router.push('/')\r\n            return this.connected\r\n          }\r\n\r\n          return this.connected\r\n        },\r\n        deleteAccount() {\r\n          axios.delete(`http://localhost:3200/api/auth/delete/${this.userId}`, {\r\n            headers: {\r\n              Authorization: `Bearer ${this.token}`,\r\n              'Content-Type': 'application/json'\r\n            }\r\n          })\r\n          .then(response => {\r\n              console.log(response)\r\n              this.$store.dispatch('disconnect')\r\n              this.$router.go()\r\n          })\r\n          .catch(error => {\r\n              console.log(error)\r\n          })\r\n        },\r\n        updateAvatar(event) {\r\n          this.image = event.target.files[0]\r\n          this.avatar = URL.createObjectURL(this.image)\r\n        }\r\n      },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n    .account-settings .user-profile {\r\n        margin: 0 0 1rem 0;\r\n        padding-bottom: 1rem;\r\n        text-align: center;\r\n    }\r\n\r\n    .account-settings .user-profile .user-avatar {\r\n        margin: 0 0 1rem 0;\r\n    }\r\n\r\n    .account-settings .user-profile .user-avatar img {\r\n        width: 90px;\r\n        height: 90px;\r\n        -webkit-border-radius: 100px;\r\n        -moz-border-radius: 100px;\r\n        border-radius: 100px;\r\n    }\r\n\r\n    .account-settings .user-profile h5.user-name {\r\n        margin: 0 0 0.5rem 0;\r\n    }\r\n\r\n    .account-settings .user-profile h6.user-email {\r\n        margin: 0;\r\n        font-size: 0.8rem;\r\n        font-weight: 400;\r\n        color: #9fa8b9;\r\n    }\r\n\r\n    .account-settings .about {\r\n        margin: 2rem 0 0 0;\r\n        text-align: center;\r\n    }\r\n\r\n    .account-settings .about h5 {\r\n        margin: 0 0 15px 0;\r\n        color: #007ae1;\r\n    }\r\n\r\n    .account-settings .about p {\r\n        font-size: 0.825rem;\r\n    }\r\n\r\n    .form-control {\r\n        border: 1px solid #cfd1d8;\r\n        -webkit-border-radius: 2px;\r\n        -moz-border-radius: 2px;\r\n        border-radius: 2px;\r\n        font-size: .825rem;\r\n        background: #ffffff;\r\n        color: #2e323c;\r\n    }\r\n\r\n    .card {\r\n        background: #ffffff;\r\n        -webkit-border-radius: 5px;\r\n        -moz-border-radius: 5px;\r\n        border-radius: 5px;\r\n        border: 0;\r\n        margin-bottom: 1rem;\r\n    }\r\n\r\n    #inputAvatar {\r\n      display: none;\r\n    }\r\n\r\n    .user-avatar label {\r\n      cursor: pointer;\r\n      position: relative;\r\n    }\r\n\r\n    .user-avatar label .modify-profile {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      background: rgba(0, 0, 0, 0.8);\r\n      width: 100%;\r\n      height: 100%;\r\n      border-radius: 50%;\r\n      color: #fff;\r\n      opacity: 0;\r\n      transition: all 0.5s ease-in-out;\r\n    }\r\n\r\n    .user-avatar label .modify-profile:hover {\r\n      opacity: 1;\r\n      transition: all 0.5s ease-in-out;\r\n    }\r\n\r\n    .user-avatar label .modify-profile p {\r\n      margin: 0;\r\n    }\r\n\r\n</style>","import { render } from \"./Profil.vue?vue&type=template&id=5480dfc4&scoped=true\"\nimport script from \"./Profil.vue?vue&type=script&lang=js\"\nexport * from \"./Profil.vue?vue&type=script&lang=js\"\n\nimport \"./Profil.vue?vue&type=style&index=0&id=5480dfc4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\oyers\\\\OneDrive\\\\Documents\\\\GitHub\\\\StevenOyer_07_10102021\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5480dfc4\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Profil.vue?vue&type=style&index=0&id=5480dfc4&scoped=true&lang=css\""],"sourceRoot":""}