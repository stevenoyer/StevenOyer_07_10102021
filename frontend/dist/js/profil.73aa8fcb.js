(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profil"],{2768:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o=function(e){return Object(n["v"])("data-v-5480dfc4"),e=e(),Object(n["t"])(),e},a={key:0,class:"container-fluid container-md mt-5"},l={class:"container"},s={class:"row gutters"},r={class:"col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12"},i={class:"card h-100"},d={class:"card-body"},u={class:"account-settings"},m={class:"user-profile"},p={class:"user-avatar"},b=o((function(){return Object(n["g"])("div",{class:"modify-profile"},[Object(n["g"])("p",null,"Modifier")],-1)})),g=["src"],j={key:1,src:"https://semainedelhistoire.com/wp-content/uploads/2021/04/avatar_placeholder.png"},h={class:"user-name"},O={class:"user-email"},f={class:"col-xl-9 col-lg-9 col-md-12 col-sm-12 col-12"},v={class:"card h-100"},w={class:"card-body"},y={class:"row gutters"},x=o((function(){return Object(n["g"])("div",{class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},[Object(n["g"])("h6",{class:"mb-2 text-danger"},"Détails du compte")],-1)})),P={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 mt-2"},k={class:"form-group"},I=o((function(){return Object(n["g"])("label",{for:"prenom"},"Prénom",-1)})),A=["value"],C={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 mt-2"},N={class:"form-group"},B=o((function(){return Object(n["g"])("label",{for:"nom"},"Nom",-1)})),E=["value"],U={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 my-4"},$={class:"form-group"},D=o((function(){return Object(n["g"])("label",{for:"email"},"E-mail",-1)})),J=["value"],_={class:"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 mb-3 my-4"},z={class:"form-group"},L=o((function(){return Object(n["g"])("label",{for:"pass"},"Nouveau mot de passe",-1)})),M={class:"row gutters"},R={class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},T={class:"text-right d-flex justify-content-end"};function F(e,t,c,o,F,H){return H.isConnected()?(Object(n["s"])(),Object(n["f"])("div",a,[Object(n["g"])("div",l,[Object(n["g"])("div",s,[Object(n["g"])("div",r,[Object(n["g"])("div",i,[Object(n["g"])("div",d,[Object(n["g"])("div",u,[Object(n["g"])("div",m,[Object(n["g"])("div",p,[Object(n["g"])("label",null,[b,Object(n["g"])("input",{onChange:t[0]||(t[0]=function(e){return H.updateAvatar(e)}),type:"file",name:"avatar",id:"inputAvatar"},null,32),e.avatar?(Object(n["s"])(),Object(n["f"])("img",{key:0,src:e.avatar},null,8,g)):(Object(n["s"])(),Object(n["f"])("img",j))])]),Object(n["g"])("h5",h,Object(n["B"])(e.prenom)+" "+Object(n["B"])(e.nom),1),Object(n["g"])("h6",O,Object(n["B"])(e.email),1),Object(n["g"])("button",{onClick:t[1]||(t[1]=function(e){return H.deleteAccount()}),class:"btn btn-danger mt-4"},"Supprimer mon compte")])])])])]),Object(n["g"])("div",f,[Object(n["g"])("div",v,[Object(n["g"])("div",w,[Object(n["g"])("div",y,[x,Object(n["g"])("div",P,[Object(n["g"])("div",k,[I,Object(n["g"])("input",{type:"text",class:"form-control",onInput:t[2]||(t[2]=function(e){return F.newPrenom=e.target.value}),id:"prenom",placeholder:"John",value:e.prenom},null,40,A)])]),Object(n["g"])("div",C,[Object(n["g"])("div",N,[B,Object(n["g"])("input",{type:"text",class:"form-control",onInput:t[3]||(t[3]=function(e){return F.newNom=e.target.value}),id:"nom",placeholder:"Doe",value:e.nom},null,40,E)])]),Object(n["g"])("div",U,[Object(n["g"])("div",$,[D,Object(n["g"])("input",{type:"email",class:"form-control",onInput:t[4]||(t[4]=function(e){return F.newEmail=e.target.value}),id:"email",placeholder:"john.doe@example.com",value:e.email},null,40,J)])]),Object(n["g"])("div",_,[Object(n["g"])("div",z,[L,Object(n["H"])(Object(n["g"])("input",{type:"password","onUpdate:modelValue":t[5]||(t[5]=function(e){return F.newPass=e}),class:"form-control",id:"pass",placeholder:"*************"},null,512),[[n["D"],F.newPass]])])])]),Object(n["g"])("div",M,[Object(n["g"])("div",R,[Object(n["g"])("div",T,[Object(n["g"])("button",{onClick:t[6]||(t[6]=function(e){return H.updateUser()}),id:"submit",name:"submit",class:"btn btn-primary"},"Mettre à jour")])])])])])])])])])):Object(n["e"])("",!0)}var H=c("5530"),S=(c("d3b7"),c("3ca3"),c("ddb0"),c("2b3d"),c("9861"),c("bc3a")),V=c.n(S),q=c("5502"),G={name:"Profil",data:function(){return{newPrenom:"",newNom:"",newEmail:"",newPass:"",newAvatar:""}},computed:Object(H["a"])({},Object(q["b"])(["connected","prenom","nom","email","avatar","userId","token"])),methods:{updateUser:function(){var e=this,t=new FormData;t.append("userId",this.userId),""!=this.newPrenom?t.append("prenom",this.newPrenom):t.append("prenom",this.prenom),""!=this.newNom?t.append("nom",this.newNom):t.append("nom",this.nom),""!=this.newEmail?t.append("email",this.newEmail):t.append("email",this.email),""!=this.newPass&&t.append("pass",this.newPass),""!=this.image&&t.append("image",this.image),V.a.put("http://localhost:3200/api/auth/update",t,{headers:{Authorization:"Bearer ".concat(this.token),"Content-Type":"image/jpeg"}}).then((function(t){console.log(t),e.$store.dispatch("updateAccount",{userId:t.data.userId,prenom:t.data.prenom,nom:t.data.nom,email:t.data.email,avatar:t.data.avatar}),e.$router.go()})).catch((function(e){console.log(e)}))},isConnected:function(){return this.connected||this.$router.push("/"),this.connected},deleteAccount:function(){var e=this;V.a.delete("http://localhost:3200/api/auth/delete/".concat(this.userId),{headers:{Authorization:"Bearer ".concat(this.token),"Content-Type":"application/json"}}).then((function(t){console.log(t),e.$store.dispatch("disconnect"),e.$router.go()})).catch((function(e){console.log(e)}))},updateAvatar:function(e){this.image=e.target.files[0],this.avatar=URL.createObjectURL(this.image)}}},K=(c("a28a"),c("6b0d")),Q=c.n(K);const W=Q()(G,[["render",F],["__scopeId","data-v-5480dfc4"]]);t["default"]=W},a28a:function(e,t,c){"use strict";c("c076")},c076:function(e,t,c){}}]);
//# sourceMappingURL=profil.73aa8fcb.js.map